function canGame() {
  return "getGamepads" in navigator;
}
var hasGP = !1,
  repGP,
  left = !1,
  right = !1,
  stopLeft = !0,
  stopRight = !0,
  stopDown = !0,
  stopUp = !0,
  stopB = [!0, !0, !0, !0, !0, !0, !0, !0, !0, !0],
  swfObject;
$(document).ready(function () {
  function o() {
    w.left &&
      stopLeft &&
      ((stopLeft = !1),
      (stopRight = !0),
      console.log("left press"),
      i(stopLeft),
      B(stopRight)),
      w.right &&
        stopRight &&
        ((stopRight = !1),
        (stopLeft = !0),
        console.log("right press"),
        B(stopRight),
        i(stopLeft)),
      w.left ||
        w.right ||
        stopLeft ||
        ((stopRight = !0),
        (stopLeft = !0),
        (w.right = !1),
        console.log("left up"),
        i(stopLeft),
        B(stopRight)),
      w.left ||
        w.right ||
        stopRight ||
        ((stopRight = !0),
        (stopLeft = !0),
        console.log("right up"),
        B(stopRight),
        i(stopLeft)),
      w.down &&
        stopDown &&
        ((stopDown = !1),
        (stopUp = !0),
        console.log("down press"),
        u(stopDown),
        f(stopUp)),
      w.up &&
        stopUp &&
        ((stopUp = !1),
        (stopDown = !0),
        console.log("up press"),
        f(stopUp),
        u(stopDown)),
      w.down ||
        w.up ||
        stopDown ||
        ((stopUp = !0),
        (stopDown = !0),
        console.log("down up"),
        u(stopDown),
        f(stopUp)),
      w.down ||
        w.up ||
        stopUp ||
        ((stopUp = !0),
        (stopDown = !0),
        console.log("up up"),
        f(stopUp),
        u(stopDown)),
      w._0 &&
        stopB[0] &&
        ((stopB[0] = !1), console.log("0 press"), s(stopB[0])),
      w._0 || stopB[0] || ((stopB[0] = !0), console.log("0 up"), s(stopB[0])),
      w._1 &&
        stopB[1] &&
        ((stopB[1] = !1), console.log("1 press"), p(stopB[1])),
      w._1 || stopB[1] || ((stopB[1] = !0), console.log("1 up"), p(stopB[1])),
      w._2 &&
        stopB[2] &&
        ((stopB[2] = !1), console.log("2 press"), e(stopB[2])),
      w._2 || stopB[2] || ((stopB[2] = !0), console.log("2 up"), e(stopB[2])),
      w._3 &&
        stopB[3] &&
        ((stopB[3] = !1), console.log("3 press"), n(stopB[3])),
      w._3 || stopB[3] || ((stopB[3] = !0), console.log("3 up"), n(stopB[3])),
      w._4 &&
        stopB[4] &&
        ((stopB[4] = !1), console.log("4 press"), c(stopB[4])),
      w._4 || stopB[4] || ((stopB[4] = !0), console.log("4 up"), c(stopB[4])),
      w._5 &&
        stopB[5] &&
        ((stopB[5] = !1), console.log("5 press"), r(stopB[5])),
      w._5 || stopB[5] || ((stopB[5] = !0), console.log("5 up"), r(stopB[5])),
      w._6 &&
        stopB[6] &&
        ((stopB[6] = !1), console.log("6 press"), l(stopB[6])),
      w._6 || stopB[6] || ((stopB[6] = !0), console.log("6 up"), l(stopB[6])),
      w._7 &&
        stopB[7] &&
        ((stopB[7] = !1), console.log("7 press"), _(stopB[7])),
      w._7 || stopB[7] || ((stopB[7] = !0), console.log("7 up"), _(stopB[7])),
      w._8 &&
        stopB[8] &&
        ((stopB[8] = !1), console.log("8 press"), g(stopB[8])),
      w._8 || stopB[8] || ((stopB[8] = !0), console.log("8 up"), g(stopB[8])),
      w._9 &&
        stopB[9] &&
        ((stopB[9] = !1), console.log("9 press"), a(stopB[9])),
      w._9 || stopB[9] || ((stopB[9] = !0), console.log("9 up"), a(stopB[9]));
  }
  function t() {
    var o = navigator.getGamepads()[0];
    o.buttons[0].pressed ? (w._0 = !0) : (w._0 = !1),
      o.buttons[1].pressed ? (w._1 = !0) : (w._1 = !1),
      o.buttons[2].pressed ? (w._2 = !0) : (w._2 = !1),
      o.buttons[3].pressed ? (w._3 = !0) : (w._3 = !1),
      o.buttons[4].pressed ? (w._4 = !0) : (w._4 = !1),
      o.buttons[5].pressed ? (w._5 = !0) : (w._5 = !1),
      o.buttons[6].pressed ? (w._6 = !0) : (w._6 = !1),
      o.buttons[7].pressed ? (w._7 = !0) : (w._7 = !1),
      o.buttons[8].pressed ? (w._8 = !0) : (w._8 = !1),
      o.buttons[9].pressed ? (w._9 = !0) : (w._9 = !1);
    var t = o.axes[0],
      s = o.axes[1];
    -0.5 > t
      ? ((w.left = !0), (w.right = !1))
      : t > 0.5
      ? ((w.left = !1), (w.right = !0))
      : ((w.left = !1), (w.right = !1)),
      -0.5 > s
        ? ((w.up = !0), (w.down = !1))
        : s > 0.5
        ? ((w.up = !1), (w.down = !0))
        : ((w.up = !1), (w.down = !1));
  }
  function s(o) {
    var t = o;
    swfObject.set_str_0(t);
  }
  function p(o) {
    var t = o;
    swfObject.set_str_1(t);
  }
  function e(o) {
    var t = o;
    swfObject.set_str_2(t);
  }
  function n(o) {
    var t = o;
    swfObject.set_str_3(t);
  }
  function c(o) {
    var t = o;
    swfObject.set_str_4(t);
  }
  function r(o) {
    var t = o;
    swfObject.set_str_5(t);
  }
  function l(o) {
    var t = o;
    swfObject.set_str_6(t);
  }
  function _(o) {
    var t = o;
    swfObject.set_str_7(t);
  }
  function g(o) {
    var t = o;
    swfObject.set_str_8(t);
  }
  function a(o) {
    var t = o;
    swfObject.set_str_9(t);
  }
  function i(o) {
    var t = o;
    swfObject.set_str_left(t);
  }
  function B(o) {
    var t = o;
    swfObject.set_str_right(t);
  }
  function f(o) {
    var t = o;
    swfObject.set_str_up(t);
  }
  function u(o) {
    var t = o;
    swfObject.set_str_down(t);
  }
  var w = {
    left: !1,
    right: !1,
    down: !1,
    up: !1,
    _0: !1,
    _1: !1,
    _2: !1,
    _3: !1,
    _4: !1,
    _5: !1,
    _6: !1,
    _7: !1,
    _8: !1,
    _9: !1,
  };
  if ((setInterval(o, 30), canGame())) {
    var d = "To begin using your gamepad, connect it and press any button!";
    $(window).on("gamepadconnected", function () {
      (hasGP = !0),
        (d = "Gamepad connected!"),
        console.log("connection event"),
        (repGP = window.setInterval(t, 100));
    }),
      $(window).on("gamepaddisconnected", function () {
        console.log("disconnection event"),
          (d = "Gamepad disconnected!"),
          window.clearInterval(repGP);
      });
    var v = window.setInterval(function () {
    //   console.log("checkGP"),
        navigator.getGamepads()[0] &&
          (hasGP || $(window).trigger("gamepadconnected"),
          window.clearInterval(v));
    }, 500);
  }
  swfObject = new Gamepad();
});
